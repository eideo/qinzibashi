@using PBS.Model;
@model PBS.Model.pbs_basic_Goods
@{
    Layout = "~/Views/Shared/_Home.cshtml";

    List<pbs_basic_GoodsClass> goodsClasslist = new List<pbs_basic_GoodsClass>();
    goodsClasslist = (List<pbs_basic_GoodsClass>)ViewData["GoodsClassList"];

    List<pbs_basic_ActivityClass> activityClasslist = new List<pbs_basic_ActivityClass>();
    activityClasslist = (List<pbs_basic_ActivityClass>)ViewData["ActivityClassList"];

    List<pbs_basic_GoodsType> goodsTypelist = new List<pbs_basic_GoodsType>();
    goodsTypelist = (List<pbs_basic_GoodsType>)ViewData["GoodsTypeList"];

    List<pbs_basic_AgeRange> ageRangelist = new List<pbs_basic_AgeRange>();
    ageRangelist = (List<pbs_basic_AgeRange>)ViewData["AgeRangeList"];

    List<pbs_basic_Region> regionlist = new List<pbs_basic_Region>();
    regionlist = (List<pbs_basic_Region>)ViewData["RegionList"];
}

<!--top-Header-menu-->
@RenderPage("~/Views/Shared/_Header.cshtml")
<!--close-top-Header-menu-->
<!--main-container-part-->
<div id="content">
    <div id="content-header">
        <div id="breadcrumb">
            <a href="javascript:void(0)"><i class="icon-home"></i>活动管理</a>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid normal-size" style="margin: 0px">
            <div class="widget-box">
                <div class="widget-content tab-content">
                    <div id="tab1" class="tab-pane active">
                        <div class="span6">
                            <div class="widget-box">
                                <div class="widget-content nopadding">
                                    <form action="#" method="get" class="form-horizontal">
                                        <div class="control-group">
                                            <label class="control-label">活动编号 :</label>
                                            <div class="controls">
                                                <input id="GoodsId" type="text" class="span11" placeholder="活动编号" value="@Model.GoodsId" readonly="readonly" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">活动名称 :</label>
                                            <div class="controls">
                                                <input id="GoodsName" type="text" class="span11" placeholder="活动名称" value="@Model.GoodsName" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">市场价 :</label>
                                            <div class="controls">
                                                <input id="MarketPrice" type="text" class="span11" placeholder="市场价" value="@Model.MarketPrice" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">销售价 :</label>
                                            <div class="controls">
                                                <input id="SellingPrice" type="text" class="span11" placeholder="销售价" value="@Model.SellingPrice"/>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">活动成本 :</label>
                                            <div class="controls">
                                                <input id="GoodsCost" type="text" class="span11" placeholder="销售价" value="@Model.GoodsCost" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">平台服务费 :</label>
                                            <div class="controls">
                                                <input id="PlatformCost" type="text" class="span11" placeholder="销售价" value="@Model.PlatformCost" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">其他费用 :</label>
                                            <div class="controls">
                                                <input id="OtherCost" type="text" class="span11" placeholder="销售价" value="@Model.OtherCost" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">活动名额 :</label>
                                            <div class="controls">
                                                <input id="GoodsCount" type="text" class="span11" placeholder="活动名额" value="@Model.GoodsCount" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">参加时间1 :</label>
                                            <div class="controls">
                                                <input id="VisitTime1" class="span11" readonly type="text" placeholder="参加时间1" value="@Model.VisitTime1" /><a href="javascript:void(0)" onclick="ClearTime(1)">清空</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">参加时间2 :</label>
                                            <div class="controls">
                                                <input id="VisitTime2" type="text" class="span11" readonly placeholder="参加时间2" value="@Model.VisitTime2" /><a href="javascript:void(0)" onclick="ClearTime(2)">清空</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">参加时间3 :</label>
                                            <div class="controls">
                                                <input id="VisitTime3" type="text" class="span11" readonly placeholder="参加时间3" value="@Model.VisitTime3" /><a href="javascript:void(0)" onclick="ClearTime(3)">清空</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">参加时间4 :</label>
                                            <div class="controls">
                                                <input id="VisitTime4" type="text" class="span11" readonly placeholder="参加时间4" value="@Model.VisitTime4" /><a href="javascript:void(0)" onclick="ClearTime(4)">清空</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">参加时间5 :</label>
                                            <div class="controls">
                                                <input id="VisitTime5" type="text" class="span11" readonly placeholder="参加时间5" value="@Model.VisitTime5" /><a href="javascript:void(0)" onclick="ClearTime(5)">清空</a>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">活动地址 :</label>
                                            <div class="controls">
                                                <textarea id="Remark" class="span11" style="width: 220px; height: 217px">@Model.Remark</textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    <div class="span6">
                        <div class="widget-box">
                            <div class="widget-content nopadding">
                                <form action="#" method="get" class="form-horizontal">
                                    <div class="control-group">
                                        <label class="control-label">首页活动分类：</label>
                                        <div class="controls">
                                            <select id="GoodsClassId">
                                                <option value="0" title="0">请选择首页商品分类</option>
                                                @if (goodsClasslist != null && goodsClasslist.Count > 0)
                                                {
                                                    foreach (var item in goodsClasslist)
                                                    {
                                                        <option value="@item.GoodsClassId" title="@item.GoodsClassId">@item.GoodsClassName</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">活动筛选分类：</label>
                                        <div class="controls">
                                            <select id="ActivityClassId">
                                                <option value="0" title="0">请选择活动筛选分类</option>
                                                @if (activityClasslist != null && activityClasslist.Count > 0)
                                                {
                                                    foreach (var item in activityClasslist)
                                                    {
                                                        <option value="@item.ActivityClassId" title="@item.ActivityClassId">@item.ActivityClassName</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">活动类型：</label>
                                        <div class="controls">
                                            <select id="GoodsTypeId">
                                                <option value="0" title="0">请选择商品类型</option>
                                                @if (goodsTypelist != null && goodsTypelist.Count > 0)
                                                {
                                                    foreach (var item in goodsTypelist)
                                                    {
                                                        <option value="@item.GoodsTypeId" title="@item.GoodsTypeId">@item.GoodsTypeName</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">年龄范围：</label>
                                        <div class="controls">
                                            <select id="AgeRangeId">
                                                <option value="0" title="0">请选择年龄范围</option>
                                                @if (ageRangelist != null && ageRangelist.Count > 0)
                                                {
                                                    foreach (var item in ageRangelist)
                                                    {
                                                        <option value="@item.AgeRangeId" title="@item.AgeRangeId">@item.AgeRangeName</option>
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">区域：</label>
                                        <div class="controls">
                                            <select id="RegionId">
                                                <option value="0" title="0">请选择区域</option>
                                                <option id="110100" value="110100" title="110100">北京全区</option>
                                                @if (regionlist != null && regionlist.Count > 0)
                                                {
                                                    foreach (var itemParent in regionlist)
                                                    {
                                                        <option id="@itemParent.RegionId" value="@itemParent.RegionId" title="@itemParent.RegionId">@itemParent.RegionName</option>
                                                        if (itemParent.regionChildrenList != null && itemParent.regionChildrenList.Count > 0)
                                                        {
                                                            foreach (var itemChildern in itemParent.regionChildrenList)
                                                            {
                                                                <option value="@itemChildern.RegionId" title="@itemChildern.RegionId">&nbsp;&nbsp;|-@itemChildern.RegionName</option>
                                                            }
                                                        }
                                                    }
                                                }
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">是否启用：</label>
                                        <div class="controls">
                                            <select id="GoodsStatus">
                                                <option value="0" title="0">是</option>
                                                <option value="1" title="1">否</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">是否首页显示：</label>
                                        <div class="controls">
                                            <select id="IsDisplayHome">
                                                <option value="0" title="0">否</option>
                                                <option value="1" title="1">是</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">经度 :</label>
                                        <div class="controls">
                                            <input id="Longitude" type="text" class="span11" placeholder="经度" value="@Model.Longitude" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">纬度 :</label>
                                        <div class="controls">
                                            <input id="Latitude" type="text" class="span11" placeholder="纬度" value="@Model.Latitude"/>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">负责人 :</label>
                                        <div class="controls">
                                            <input id="ResponsiblePerson" type="text" class="span11" placeholder="负责人" value="@Model.ResponsiblePerson" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label class="control-label">负责人收益 :</label>
                                        <div class="controls">
                                            <input id="ResponsiblePersonProfit" type="text" class="span11" placeholder="负责人收益" value="@Model.ResponsiblePersonProfit" />
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <div class="widget-title">
                                            <ul class="nav nav-tabs">
                                                <li class="active">
                                                    <a data-toggle="tab" href="javascript:void(0)">图片</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="widget-content tab-content" style="border: 0; height: 288px;">
                                            <div id="pic1" class="tab-pane active listImg">
                                                <ul>
                                                    <li>
                                                        <img id="uploadPreview" src="../../img/220x220.png" width="220" height="220"/>（活动图片）
                                                    </li>
                                                    <li>
                                                        <div class="ulistDiv">
                                                            <input id="uploadImage" type="file" name="goodsBrandImgUrl" onchange="loadImageFile();"/>
                                                            <button id="uploadBtn" class="btn btn-primary">上传</button>
                                                            <input id="hidUploadImgUrl" type="hidden" value="@Model.GoodsMainImgUrl" />
                                                        </div>
                                                        <p style="color:red">(*必须点击上传按钮才能上传至服务器)</p>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                        <div class="widget-box">
                            <div class="widget-content nopadding">
                                <form action="#" method="get" class="form-horizontal">
                                    <div class="control-group">
                                        <label class="control-label" style="width:15%">活动详情 :</label>
                                        <div class="controls">
                                            <div id="js_editor" class="edui_editor_wrp edui-default" style="width: 100%; height: 300px;">
                                                <script id="editor" type="text/javascript"></script>
                                                <input id="SourceContent" type="hidden" value="@Model.GoodsDesc" />
                                                <input id="SourceContent1" type="hidden" name="SourceContent" value="" />
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    <div class="text-center">
                        <input type="hidden" id="IsDelete" value="@Model.IsDelete"/>
                        <input type="hidden" id="CreateTime" value="@Model.CreateTime" />
                        <input type="hidden" id="UpdateTime" value="@Model.UpdateTime" />
                        <input type="hidden" id="CreatorId" value="@Model.CreatorId" />
                        <button id="saveBasicBtn" type="button" class="btn btn-success">保存</button>
                        <a class="btn" href="/Activity/ActivityList">返回</a>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/js/bootstrap-datetimepicker.js"></script>
<script type="text/javascript">
    $("#VisitTime1,#VisitTime2,#VisitTime3,#VisitTime4,#VisitTime5").datetimepicker({
        format: 'yyyy-mm-dd hh:ii',
        weekStart: 1,
        autoclose: true,
        startView: 2,
        minView: 0,
        forceParse: false,
        language: 'zh-CN'
    });
</script>
<script type="text/javascript">
    UM.getEditor('editor');
</script>
<script type="text/javascript">
    $(function () {
        var sourceContent = $("#SourceContent").val();
        if (sourceContent !== "") {
            $("#editor").html(sourceContent);
            $("#SourceContent1").val(sourceContent);
        }

        $("#editor").keyup(function () {
            var soureContentVal = $(this).html();
            $("#SourceContent1").val(soureContentVal);
        });
    })
</script>
<script type="text/javascript">
    var goodsId = "@Model.GoodsId";
    var goodsClassId = "@Model.GoodsClassId";
    var goodsTypeId = "@Model.GoodsTypeId";
    var ageRangeId = "@Model.AgeRangeId";
    var regionId = "@Model.RegionId";
    var isDisplayHome = "@Model.IsDisplayHome";
    var goodsStatus = "@Model.GoodsStatus";
    var goodsName = $("#GoodsName").val();
    var marketPrice = $("#MarketPrice").val();
    var sellingPrice = $("#SellingPrice").val();
    var goodsCost = $("#GoodsCost").val();
    var goodsDesc = $("#SourceContent1").val();
    var goodsMainImgUrl = $("#hidUploadImgUrl").val();
    var visitTime1 = $("#VisitTime1").val();
    var visitTime2 = $("#VisitTime2").val();
    var visitTime3 = $("#VisitTime3").val();
    var visitTime4 = $("#VisitTime4").val();
    var visitTime5 = $("#VisitTime5").val();
    var longitude = $("#Longitude").val();
    var latitude = $("#Latitude").val();
    var isDelete = $("#IsDelete").val();
    var createTime = $("#CreateTime").val();
    var updateTime = $("#UpdateTime").val();
    var creatorId = $("#CreatorId").val();
    var remark = $("#Remark").val();
    var responsiblePerson = $("#ResponsiblePerson").val();
    var responsiblePersonProfit = $("#ResponsiblePersonProfit").val();
    var goodsCount = $("#GoodsCount").val();
    var activityFilterClassId = "@Model.ActivityClassId";
    var platformCost = $("#PlatformCost").val();
    var otherCost = $("#OtherCost").val();

    //var reg1 = /^[0-9]*$/;
    var reg1 = /^(([1-9]\d*)|\d)(\.\d{1,2})?$/

    function ClearTime(obj) {
        switch (obj) {
            case 1:
                $("#VisitTime1").val("");
                break;
            case 2:
                $("#VisitTime2").val("");
                break;
            case 3:
                $("#VisitTime3").val("");
                break;
            case 4:
                $("#VisitTime4").val("");
                break;
            case 5:
                $("#VisitTime5").val("");
                break;
        }

    }

</script>
<script src="~/js/Activity/ActivityAdd.js"></script>
